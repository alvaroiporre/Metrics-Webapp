import React, { useEffect, useRef } from 'react';

const formData = (data) => {
  const r = [];
  const center = { lon: 114.761101027, lat: 4.52144546404 };
  data.forEach((element) => {
    r.push({ x: (element[0] - center.lon) * 100 + 100, y: (element[1] - center.lat) * -100 + 100 });
  });
  return r;
};

const Map = () => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const context = canvas.getContext('2d');

    // Define the polygon vertices
    const data = [
      [
        114.09507751464898,
        4.590538024902399
      ],
      [
        114.10164642333997,
        4.591387748718319
      ],
      [
        114.13997650146497,
        4.594165802001899
      ],
      [
        114.16053771972697,
        4.594165802001899
      ],
      [
        114.17970275878898,
        4.592777252197319
      ],
      [
        114.19053649902297,
        4.589999198913569
      ],
      [
        114.20304870605497,
        4.581665992736929
      ],
      [
        114.28691864013697,
        4.592360496520999
      ],
      [
        114.30081176757797,
        4.595554351806639
      ],
      [
        114.52026367187497,
        4.691109657287649
      ],
      [
        114.52915954589797,
        4.695832252502439
      ],
      [
        114.54498291015597,
        4.707499504089359
      ],
      [
        114.55525207519499,
        4.717777252197209
      ],
      [
        114.56414794921898,
        4.729443550109859
      ],
      [
        114.57998657226597,
        4.747776985168459
      ],
      [
        114.59275817871098,
        4.762221336364799
      ],
      [
        114.63388061523396,
        4.803053855896109
      ],
      [
        114.65525817871095,
        4.822776794433539
      ],
      [
        114.66609191894497,
        4.832499504089409
      ],
      [
        114.68553161621097,
        4.847498893737789
      ],
      [
        114.71692657470699,
        4.871387481689509
      ],
      [
        114.73664855956999,
        4.885832786560169
      ],
      [
        114.91359710693399,
        4.996387481689569
      ],
      [
        114.93137359619097,
        5.005832672119139
      ],
      [
        114.95416259765597,
        5.017498970031739
      ],
      [
        114.96360778808597,
        5.021665573120059
      ],
      [
        115.00942993164098,
        5.037220954895129
      ],
      [
        115.04026794433598,
        5.047498703002989
      ],
      [
        115.05137634277297,
        5.050276756286729
      ],
      [
        115.06915283203097,
        5.053053855896048
      ],
      [
        115.08220672607398,
        5.052221298217769
      ],
      [
        115.09803771972696,
        5.047498703002989
      ],
      [
        115.10359954833996,
        5.039095878601189
      ],
      [
        115.04165649414098,
        4.968888282775819
      ],
      [
        114.98970031738297,
        4.904721260070739
      ],
      [
        114.98206329345696,
        4.889721393585148
      ],
      [
        115.01843261718795,
        4.895794868469239
      ],
      [
        114.98914337158197,
        4.842916011810359
      ],
      [
        114.97943115234398,
        4.831665992736869
      ],
      [
        114.96219635009798,
        4.821944236755479
      ],
      [
        114.94582366943398,
        4.817221641540469
      ],
      [
        114.91748046874999,
        4.811665534973139
      ],
      [
        114.90442657470696,
        4.811109542846679
      ],
      [
        114.87915039062496,
        4.810276985168568
      ],
      [
        114.86665344238297,
        4.809720993042109
      ],
      [
        114.85262298583999,
        4.803609848022569
      ],
      [
        114.78707122802697,
        4.749582290649359
      ],
      [
        114.77985382080098,
        4.735832214355469
      ],
      [
        114.77777099609398,
        4.720832824707089
      ],
      [
        114.77998352050797,
        4.709165573120169
      ],
      [
        114.78845977783197,
        4.697360038757319
      ],
      [
        114.81553649902398,
        4.580832481384329
      ],
      [
        114.82582092285197,
        4.495832443237299
      ],
      [
        114.82916259765597,
        4.4738883972168
      ],
      [
        114.83471679687497,
        4.446387290954699
      ],
      [
        114.84366607665996,
        4.435623645782529
      ],
      [
        114.85900878906297,
        4.432637691497859
      ],
      [
        114.86692810058598,
        4.355277061462399
      ],
      [
        114.80636596679697,
        4.144582748413139
      ],
      [
        114.79305267333997,
        4.126943588256839
      ],
      [
        114.70540618896496,
        4.049998760223449
      ],
      [
        114.66998291015597,
        4.029721260070859
      ],
      [
        114.64998626708997,
        4.022221565246579
      ],
      [
        114.63803863525399,
        4.018193721771299
      ],
      [
        114.61949157714797,
        4.021665573120119
      ],
      [
        114.60942840576197,
        4.03083229064953
      ],
      [
        114.60845184326199,
        4.055693149566589
      ],
      [
        114.47554016113297,
        4.199999809265189
      ],
      [
        114.39998626708997,
        4.256388664245609
      ],
      [
        114.32998657226597,
        4.326944351196289
      ],
      [
        114.32916259765598,
        4.339999198913629
      ],
      [
        114.30900573730497,
        4.433193206787049
      ],
      [
        114.26389312744197,
        4.497498512268119
      ],
      [
        114.24609374999997,
        4.521665573120168
      ],
      [
        114.23580932617197,
        4.531943321228028
      ],
      [
        114.18830871581997,
        4.566944122314449
      ],
      [
        114.17997741699199,
        4.57249927520752
      ],
      [
        114.16499328613297,
        4.577776908874509
      ],
      [
        114.15332031249997,
        4.579999923706109
      ],
      [
        114.09507751464898,
        4.590538024902399,
      ],
      [
        115.14578247070298,
        4.903240203857479
      ],
      [
        115.19219970703097,
        4.849165916442928
      ],
      [
        115.22303771972699,
        4.804998397827149
      ],
      [
        115.26138305664097,
        4.683053970336909
      ],
      [
        115.28249359130896,
        4.611665725707949
      ],
      [
        115.28249359130896,
        4.598609924316519
      ],
      [
        115.27832031249999,
        4.582777023315369
      ],
      [
        115.27277374267595,
        4.573888778686579
      ],
      [
        115.26860046386697,
        4.564443588256949
      ],
      [
        115.26442718505898,
        4.541110038757439
      ],
      [
        115.27318572997997,
        4.451387882232669
      ],
      [
        115.27805328369197,
        4.438887596130429
      ],
      [
        115.28636932372999,
        4.426943302154649
      ],
      [
        115.30275726318399,
        4.41027736663824
      ],
      [
        115.31790161132797,
        4.396388053894039
      ],
      [
        115.34471130371097,
        4.368331909179739
      ],
      [
        115.35080718994098,
        4.359998703002868
      ],
      [
        115.35665130615199,
        4.349304676055909
      ],
      [
        115.36026000976597,
        4.332638263702389
      ],
      [
        115.35207366943399,
        4.317499160766659
      ],
      [
        115.33985137939497,
        4.311665534973259
      ],
      [
        115.32054138183597,
        4.315554618835449
      ],
      [
        115.11360168457097,
        4.374165534973199
      ],
      [
        115.10234832763699,
        4.38055419921881
      ],
      [
        115.09636688232398,
        4.391387939453129
      ],
      [
        115.09027099609399,
        4.413332939147889
      ],
      [
        115.02942657470699,
        4.645833015442009
      ],
      [
        115.02665710449199,
        4.656665802002009
      ],
      [
        115.02053833007797,
        4.724443435668949
      ],
      [
        115.02082824706997,
        4.753333091735839
      ],
      [
        115.02912902831997,
        4.820210456848089
      ],
      [
        115.03546905517597,
        4.806943416595569
      ],
      [
        115.04998016357398,
        4.798332214355578
      ],
      [
        115.06165313720697,
        4.803053855896109
      ],
      [
        115.12468719482398,
        4.849443435668999
      ],
      [
        115.13359069824199,
        4.857637882232609
      ],
      [
        115.14578247070298,
        4.903240203857479
      ]
    ];

    const vertices = formData(data);
    // Start drawing
    context.beginPath();
    context.moveTo(vertices[0].x, vertices[0].y);

    // Draw lines between the vertices
    for (let i = 1; i < vertices.length; i += 1) {
      context.lineTo(vertices[i].x, vertices[i].y);
    }

    // Close the path to complete the polygon
    context.closePath();

    // Set the fill and stroke styles
    context.fillStyle = 'rgba(255, 0, 0, 0.5)';
    context.strokeStyle = 'black';

    // Fill and stroke the polygon
    context.fill();
    context.stroke();
  }, []);

  return <canvas ref={canvasRef} width={400} height={400} />;
};

export default Map;
